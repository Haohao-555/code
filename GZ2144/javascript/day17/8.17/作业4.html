<!--
 * @Date: 2021-08-17 18:49:10
 * @Author: 浩
 * @LastEditors: 浩
 * @FilePath: \yue_code\javascript\day17\8.17\作业4.html
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>作业4</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
      integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu"
      crossorigin="anonymous"
    />
    <style>
      h3 {
        display: inline-block;
      }
      .input-g {
        position: relative;
        display: inline-block;
      }
      .icon {
        position: absolute;
        right: 7px;
        top: 7px;
      }
    </style>
  </head>
  <body>
    <h3>请输入密码</h3>
    <div class="input-g">
      <input type="password" id="psw" />
      <span
        class="glyphicon glyphicon glyphicon-eye-close icon"
        id="btnShow"
      ></span>
    </div>
    <button id="btnClear">清除</button>
    <div id="output"></div>
    <script>
      //密钥内容
      var mcontent = "";
      // 明文
      var content = [];
      var btnshow = document.querySelector("#btnShow");
      var input = document.getElementById("psw");
      var output = document.getElementById("output");

    
      btnshow.addEventListener("mousedown", function () {
        btnshow.classList.remove("glyphicon-eye-close");
        btnshow.classList.add("glyphicon-eye-open");
        input.setAttribute("type", "text");
        input.value = content? content.join("") : "";
      });

      btnshow.addEventListener("mouseup", function () {
        btnshow.classList.remove("glyphicon-eye-open");
        btnshow.classList.add("glyphicon-eye-close");
        input.setAttribute("type", "password");
      });

      //   清除文本框内容
      var btnClear = document.querySelector("#btnClear");
      btnClear.onclick = function () {
        //   清空所有内容避免造成污染
        input.value = "";
        output.innerHTML = "";
        mcontent= "";
        content = ""
      };

      // input 监听器
      input.addEventListener("keydown", function (e) {
        // 实时更新
        output.innerHTML += e.key;
        // 转成密钥
        mcontent = e.keyCode + mcontent + " ";
        //明文保存
        content.push(e.key);
      });
    </script>
  </body>
</html>
