<!--
 * @Date: 2021-08-18 16:57:52
 * @Author: 浩
 * @LastEditors: 浩
 * @FilePath: \yue_code\javascript\day18\03-练习.html
-->
<!--
 * @Date: 2021-08-18 16:57:52
 * @Author: 浩
 * @LastEditors: 浩
 * @FilePath: \yue_code\javascript\day18\03-练习.html
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }

      .box {
        width: 100px;
        height: 100px;
        background: red;
        position: absolute;
      }
      .container {
        width: 400px;
        height: 400px;
        border: 1px solid #333;
        position: relative;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="box"></div>
    </div>
    <!-- <div class="box"></div> -->
    <script>
      var box = document.getElementsByClassName("box")[0];

      // 用一个对象来记录按下的位置
      var pos = {
        x: 0,
        y: 0,
      };
      // 在盒子中,按下按钮才能进行移动操作
      // 定义一个变量记录是否可以移动
      var isMove = false;
      box.onmousedown = function (e) {
        isMove = true;
        // 鼠标按下，记录按下位置
        pos.x = e.offsetX;
        pos.y = e.offsetY;
      };
      var con = document.getElementsByClassName("container")[0];
      con.onmousemove = function (event) {
        // 如果显示不能移动盒子，则没有必要执行下面的代码
        if (!isMove) return;
        var e = event || window.event;
        if (e.offsetX > this.offsetWidth+pos.x || e.offsetY > this.offsetHeight+pos.y) {
            isMove = false; 
        } else {
          box.style.left = e.offsetX - pos.x + "px";
          box.style.top = e.offsetY - pos.y + "px";
        }
      };

      // 鼠标弹起不能移动
      box.onmouseup = function () {
        isMove = false;
      };
    </script>
  </body>
</html>
